(this["webpackJsonpecommerce-website"]=this["webpackJsonpecommerce-website"]||[]).push([[0],{115:function(e,t,n){},116:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(35),i=n.n(a),o=(n(115),n(116),n(58)),s=n(14),l=n(25),u=n.n(l),j=n(36),d=n(12),O=n(180),b=n(203),h=n(187),x=n(205),f=n(215),p=n(216),v=n(197),S=n(196),m=n(49),_=n(37),C=n.n(_),T=n(31),g=n(198),E=n(206),k=n(193),R=n(207),y=n(182),P=n(2),w=function(e){var t=e.reloadTable,n=Object(c.useState)(!1),r=Object(d.a)(n,2),a=r[0],i=r[1],o=Object(c.useState)(""),s=Object(d.a)(o,2),l=s[0],f=s[1],p=Object(c.useState)(0),v=Object(d.a)(p,2),S=v[0],m=v[1],_=Object(c.useState)(0),w=Object(d.a)(_,2),D=w[0],A=w[1],L=Object(T.a)(),K=Object(O.a)(L.breakpoints.down("md")),F=function(){var e=Object(j.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D&&l&&S){e.next=3;break}return alert("Please fill infos"),e.abrupt("return");case 3:return e.prev=3,e.next=6,C.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_STOCK_URL,"/"),{quantity:+S,name:l,prix:+D});case 6:t(),f(""),A(0),m(0),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.error(e.t0),alert("Could not add new item");case 16:return e.prev=16,H(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,12,16,19]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){i(!1)};return Object(P.jsxs)("div",{children:[Object(P.jsx)(g.a,{variant:"contained",startIcon:Object(P.jsx)(y.a,{}),onClick:function(){return i(!a)},children:"Ajouter un nouvel item"}),Object(P.jsxs)(b.a,{fullScreen:K,open:a,onClose:H,"aria-labelledby":"responsive-dialog-title",children:[Object(P.jsx)(h.a,{id:"responsive-dialog-title",children:"Ajouter un nouvel item dans le stock"}),Object(P.jsx)(x.a,{children:Object(P.jsx)(E.a,{children:"Merci de rentrer un nouvel item"})}),Object(P.jsxs)("form",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",height:"30vh"},onSubmit:F,id:"form1",children:[Object(P.jsx)(k.a,{required:!0,style:{width:"80%",marginLeft:"10%",marginRight:"10%"},variant:"outlined",label:"Item name",type:"text",value:l,onChange:function(e){return f(e.target.value)}}),Object(P.jsx)(k.a,{required:!0,style:{width:"80%",marginLeft:"10%",marginRight:"10%"},label:"Quantit\xe9",type:"number",value:S,onChange:function(e){return m(+e.target.value)}}),Object(P.jsx)(k.a,{required:!0,label:"Item price",style:{width:"80%",marginLeft:"10%",marginRight:"10%"},type:"number",value:D,onChange:function(e){return A(+e.target.value)}})]}),Object(P.jsxs)(R.a,{children:[Object(P.jsx)(g.a,{autoFocus:!0,onClick:function(){f(""),A(0),m(0),H()},children:"Annuler"}),Object(P.jsx)(g.a,{autoFocus:!0,onClick:F,children:"Valider"})]})]})]})},D=n(191),A=n(192),L=n(208),K=n(204),F=n(209),H=n(210),W=n(211),I=n(212),U=n(213),N=n(214),B=function(e){var t=e.stocksProps,n=e.reloadTable,r=Object(c.useState)([]),a=Object(d.a)(r,2),i=a[0],o=a[1],s=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.quantity--,e.next=4,C.a.patch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_STOCK_URL,"/").concat(t.id),t);case 4:n(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),alert("Could not remove one instance of item : ".concat(t.name," new item"));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.delete("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_STOCK_URL,"/").concat(t.id));case 3:n(),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),alert("Could not remove item ".concat(t.id," - ").concat(t.name));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.quantity++,e.next=4,C.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_STOCK_URL),t);case 4:n(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),alert("Could not add one instance of item : ".concat(t.id," - ").concat(t.name));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){o(t)}),[t]),Object(P.jsxs)("div",{style:{width:"80%",paddingLeft:"10%"},children:[Object(P.jsx)("h2",{children:"Stock list"}),Object(P.jsx)(L.a,{component:K.a,children:Object(P.jsxs)(F.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(P.jsx)(H.a,{children:Object(P.jsx)(W.a,{children:["ID","Name","Price","Quantity","Stock control","Delete item"].map((function(e){return Object(P.jsx)(I.a,{align:"center",children:e})}))})}),Object(P.jsx)(U.a,{children:i.map((function(e){return Object(P.jsxs)(W.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(P.jsx)(I.a,{align:"center",component:"th",scope:"row",children:e.id}),Object(P.jsx)(I.a,{align:"center",children:e.name}),Object(P.jsxs)(I.a,{align:"center",children:[e.prix," $"]}),Object(P.jsx)(I.a,{align:"center",children:e.quantity}),Object(P.jsxs)(I.a,{align:"center",children:[Object(P.jsx)(N.a,{onClick:function(){return O(e)},color:"success",children:Object(P.jsx)(y.a,{})}),Object(P.jsx)(N.a,{onClick:function(){return s(e)},color:"warning",children:Object(P.jsx)(D.a,{})})]}),Object(P.jsx)(I.a,{align:"center",children:Object(P.jsx)(g.a,{color:"error",variant:"contained",onClick:function(){return l(e)},startIcon:Object(P.jsx)(A.a,{}),children:"Delete"})})]},e.id)}))})]})})]})},q=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),i=Object(d.a)(a,2),o=i[0],s=i[1],l=Object(c.useState)(!1),_=Object(d.a)(l,2),T=_[0],g=_[1],E=Object(c.useState)(""),k=Object(d.a)(E,2),R=k[0],y=k[1],D=Object(c.useState)("success"),A=Object(d.a)(D,2),L=A[0],K=A[1],F=Object(m.a)(),H=Object(O.a)(F.breakpoints.down("md")),W=Object(c.useState)(!1),I=Object(d.a)(W,2),U=I[0],N=I[1],q=Object(c.useRef)(setTimeout((function(){return""}),1e4)),V=function(){g(!1)},G=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_STOCK_URL,"/"));case 3:t=e.sent,r(t.data),s(!0),e.next=16;break;case 8:e.prev=8,e.t0=e.catch(0),K("error"),y("Could not fetch info from stock backend"),g(!0),clearInterval(q.current),console.error(e.t0),s(!0);case 16:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return q.current=setInterval(G,1e4),G(),function(){return clearInterval(q.current)}}),[]),Object(P.jsxs)("div",{style:{display:"flex",flexDirection:"column",textAlign:"center"},children:[Object(P.jsx)("h1",{children:"Stock"}),o?Object(P.jsx)(P.Fragment,{}):Object(P.jsxs)(b.a,{fullScreen:H,open:U,onClose:function(){N(!1)},"aria-labelledby":"responsive-dialog-title",children:[Object(P.jsx)(h.a,{id:"responsive-dialog-title",children:"Ajouter un nouvel item dans le stock"}),Object(P.jsx)(x.a,{children:Object(P.jsx)(f.a,{})})]}),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(B,{reloadTable:G,stocksProps:n}),Object(P.jsx)(p.a,{style:{marginBottom:"5%",marginTop:"5%",width:"90%",marginLeft:"5%"}}),Object(P.jsx)(w,{reloadTable:G})]}),Object(P.jsx)(v.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:T,autoHideDuration:6e3,onClose:V,children:Object(P.jsx)(S.a,{variant:"filled",onClose:V,severity:L,sx:{width:"100%"},children:R})})]})},V=n(201),G=n(200),J=n(202);function M(){return Object(P.jsx)(G.a,{sx:{flexGrow:1},children:Object(P.jsx)(V.a,{position:"static",style:{backgroundColor:"#282c34"},children:Object(P.jsx)(J.a,{children:Object(P.jsx)("nav",{style:{display:"flex",justifyContent:"space-evenly",flexGrow:1},children:Object(P.jsx)(o.b,{className:"navlink",to:"/stocks",children:"Stocks"})})})})})}var Q=function(){return Object(P.jsx)("div",{className:"App",children:Object(P.jsx)(o.a,{children:Object(P.jsxs)("div",{children:[Object(P.jsx)(M,{}),Object(P.jsx)(s.c,{children:Object(P.jsx)(s.a,{path:"/stocks",children:Object(P.jsx)(q,{})})})]})})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,217)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(P.jsx)(r.a.StrictMode,{children:Object(P.jsx)(Q,{})}),document.getElementById("root")),z()}},[[146,1,2]]]);
//# sourceMappingURL=main.4018527d.chunk.js.map